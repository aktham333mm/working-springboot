pipeline{
    agent{
        label 'kube-jenkins'
    }
    stages{
        stage("test"){
            steps{
                container("jenkins-slave-bb"){
                    echo "hello world"
                    sh "mvn --version"
                }
            }
        }
        stage("build-app"){
            steps{
                container("jenkins-slave-bb"){
                    sh "mvn --version"
                    sh "mvn clean package -Dmaven.test.skip"
                }
                
            }
        }
        stage("deploy to k8s"){
            steps{
                echo "hello world"
            }
        }
    }
}
